# 🚀 开始使用 - 千问版新闻联播投资分析系统

## ✅ 已完成的配置

您的项目已经成功配置为使用**阿里云千问（Qwen）**大语言模型！

- ✅ API 接口已从 OpenAI 切换到千问
- ✅ API Key 已提供：`sk-fefa9fed5599445abd3532c3b8187488`
- ✅ 所有文档已更新
- ✅ 使用 qwen-max 模型（最强性能）

---

## 🎯 三步开始使用

### 步骤 1：创建环境变量文件

在项目根目录下，手动创建 `.env` 文件，内容如下：

```env
QWEN_API_KEY=sk-fefa9fed5599445abd3532c3b8187488
```

**Windows 快速创建命令**（在项目目录下运行）：
```powershell
@"
QWEN_API_KEY=sk-fefa9fed5599445abd3532c3b8187488
"@ | Out-File -FilePath .env -Encoding utf8
```

### 步骤 2：安装依赖

```bash
npm install
```

### 步骤 3：运行项目

打开**三个终端**窗口：

**终端 1**：
```bash
npm run dev
```
> 启动开发服务器，访问 http://localhost:3000

**终端 2**：
```bash
npm run scrape
```
> 抓取今日新闻数据

**终端 3**：
```bash
npm run analyze
```
> AI 分析新闻，生成投资建议

---

## 📊 查看结果

1. 等待分析完成（约 2-5 分钟）
2. 刷新浏览器页面
3. 查看四大维度分析：
   - 📈 行业影响
   - 🏢 上市公司
   - 📦 期货商品
   - 🏛️ 债券市场

---

## 💡 模型选择建议

**当前使用**: `qwen-max`（最强性能，每天约 ¥1-2）

**如需降低成本**，可修改为 `qwen-plus`：

编辑 `lib/analyzer.ts` 第 108 行：
```typescript
model: 'qwen-plus', // 每天约 ¥0.1-0.2，节省 90% 成本
```

| 模型 | 质量 | 速度 | 每日成本(10条) | 推荐场景 |
|------|------|------|----------------|----------|
| qwen-max | ⭐⭐⭐⭐⭐ | 较慢 | ¥1-2 | 重要投资决策 |
| qwen-plus | ⭐⭐⭐⭐ | 中等 | ¥0.1-0.2 | 日常分析（推荐） |
| qwen-turbo | ⭐⭐⭐ | 快 | ¥0.05-0.1 | 快速浏览 |

---

## 📋 常用命令

```bash
# 开发
npm run dev              # 启动开发服务器

# 数据处理
npm run scrape           # 抓取今日新闻
npm run scrape 2024-01-15    # 抓取指定日期
npm run scrape "" 7      # 抓取最近7天

npm run analyze          # 分析今日新闻
npm run analyze 2024-01-15   # 分析指定日期

# 生产
npm run build            # 构建生产版本
npm run start            # 运行生产服务器
```

---

## 🔍 验证配置

### 测试 API 连接

```bash
curl https://dashscope.aliyuncs.com/compatible-mode/v1/models \
  -H "Authorization: Bearer sk-fefa9fed5599445abd3532c3b8187488"
```

如果返回模型列表，说明配置正确！

---

## 📚 详细文档

| 文档 | 说明 |
|------|------|
| **CHANGELOG_QWEN.md** | 千问迁移变更日志 |
| **QWEN_SETUP.md** | 千问详细配置指南 |
| **README.md** | 完整项目说明 |
| **QUICK_START.md** | 快速启动指南 |
| **DEPLOYMENT_GUIDE.md** | Vercel 部署教程 |
| **PROJECT_STRUCTURE.md** | 项目架构说明 |

---

## ⚠️ 常见问题

### Q: 抓取不到数据？

A: 
1. 检查网络连接
2. 尝试其他日期：`npm run scrape 2024-11-26`
3. 查看控制台错误信息

### Q: AI 分析失败？

A:
1. 确认 `.env` 文件已创建且 API Key 正确
2. 检查阿里云账户余额
3. 查看终端错误信息

### Q: 页面显示"暂无数据"？

A:
1. 确保已运行 `npm run scrape`
2. 确保已运行 `npm run analyze`
3. 刷新浏览器页面

### Q: 成本太高？

A:
将模型改为 `qwen-plus`，可节省 90% 成本！

---

## 💰 成本说明

### 使用 qwen-max
- 每天 10 条新闻：约 ¥1-2
- 每月：约 ¥30-60

### 使用 qwen-plus（推荐）
- 每天 10 条新闻：约 ¥0.1-0.2
- 每月：约 ¥3-6

### 对比 OpenAI GPT-4
- GPT-4：每月 ¥70-105
- qwen-plus：每月 ¥3-6
- **节省 95% 成本！** 🎉

---

## 🎉 开始分析吧！

现在一切就绪，你可以：

1. ✅ 每日抓取新闻联播数据
2. ✅ AI 智能分析投资机会
3. ✅ 查看行业、公司、期货、债券影响
4. ✅ 基于数据做出投资决策

**祝你投资顺利！** 📈🚀

---

## 🆘 需要帮助？

- 📖 查看详细文档
- 💬 提交 GitHub Issue
- 🔍 搜索常见问题

**技术支持**：
- 阿里云工单：https://workorder.console.aliyun.com/
- 千问社区：https://tongyi.aliyun.com/
